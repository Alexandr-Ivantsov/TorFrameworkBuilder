# üîç –ü–û–ß–ï–ú–£ SIMULATOR –ù–ï –†–ê–ë–û–¢–ê–ï–¢ –í v1.0.39?

**–î–∞—Ç–∞:** 29 –æ–∫—Ç—è–±—Ä—è 2025, 10:03  
**–ü—Ä–æ–±–ª–µ–º–∞:** `Building for 'iOS-simulator', but linking in dylib built for 'iOS'`

---

## üéØ **–ö–û–†–ù–ï–í–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**

### Tor binary (`libtor.a`) —Å–æ–±—Ä–∞–Ω —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º platform!

```bash
# v1.0.39 - —è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª device binary –∫–∞–∫ simulator:
cp output/device/Tor.framework/Tor output/simulator/Tor.framework/

# –ù–û device binary –∏–º–µ–µ—Ç platform = 2 (iOS)!
# Simulator –¢–†–ï–ë–£–ï–¢ platform = 7 (iOS Simulator)!

# Xcode –≤–∏–¥–∏—Ç:
# - Framework –ª–∏–Ω–∫—É–µ—Ç—Å—è —Å -target arm64-apple-ios16.0-simulator
# - –ù–û binary –≤–Ω—É—Ç—Ä–∏ –∏–º–µ–µ—Ç platform 2 (iOS)
# ‚Üí –û–®–ò–ë–ö–ê!
```

---

## üîß **–ß–¢–û –ù–£–ñ–ù–û –ë–´–õ–û –°–î–ï–õ–ê–¢–¨:**

### –í–∞—Ä–∏–∞–Ω—Ç A: –°–æ–±—Ä–∞—Ç—å Tor –¥–ª—è simulator –ü–†–ê–í–ò–õ–¨–ù–û

```bash
# –í build_tor_simulator.sh –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
CFLAGS="-target arm64-apple-ios16.0-simulator ..."

# ‚úÖ –Ø –≠–¢–û –°–î–ï–õ–ê–õ!
```

**–ù–û:**

```bash
# –ü—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ main.c:
fatal error: 'ht.h' file not found

# main.c –ù–ï –ö–û–ú–ü–ò–õ–ò–†–£–ï–¢–°–Ø ‚Üí tor_run_main –û–¢–°–£–¢–°–¢–í–£–ï–¢!
# –õ–∏–Ω–∫–æ–≤–∫–∞ –ø–∞–¥–∞–µ—Ç —Å "Undefined symbols: _tor_run_main"
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `build_tor_simulator.sh` –Ω–µ –º–æ–∂–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å `main.c` –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö headers!

### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å device binary, –Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å platform

```bash
# –ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ device binary:
# –ò–∑–º–µ–Ω–∏—Ç—å platform —Å 2 (iOS) –Ω–∞ 7 (iOS Simulator)
# –ò—Å–ø–æ–ª—å–∑—É—è vtool –∏–ª–∏ hex editing
```

**–ù–û:** –≠—Ç–æ –•–†–£–ü–ö–û–ï —Ä–µ—à–µ–Ω–∏–µ! –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –≤ –±—É–¥—É—â–µ–º!

### –í–∞—Ä–∏–∞–Ω—Ç C: –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ simulator slice! (—Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥)

```bash
# –°–æ–∑–¥–∞—Ç—å XCFramework –¢–û–õ–¨–ö–û –¥–ª—è device
# TorApp –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
# –ù–ï–¢ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Simulator

# ‚úÖ –≠–¢–û –ù–ê–î–Å–ñ–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢!
```

---

## üí° **–ü–û–ß–ï–ú–£ –°–¢–ê–†–´–ô –ü–û–î–•–û–î –†–ê–ë–û–¢–ê–õ?**

### –î–æ v1.0.38:

```
Tor.xcframework/
‚îú‚îÄ‚îÄ Info.plist (–¢–û–õ–¨–ö–û ios-arm64)
‚îî‚îÄ‚îÄ ios-arm64/Tor.framework/ (device binary)

# TorApp –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è device
# Simulator –ù–ï –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–¢–°–Ø
# ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ –ë–ï–ó –û–®–ò–ë–û–ö!
```

### v1.0.39 (–ù–ï –†–ê–ë–û–¢–ê–ï–¢):

```
Tor.xcframework/
‚îú‚îÄ‚îÄ Info.plist (ios-arm64 + ios-arm64-simulator)
‚îú‚îÄ‚îÄ ios-arm64/Tor.framework/ (device binary, platform 2)
‚îî‚îÄ‚îÄ ios-arm64-simulator/Tor.framework/ (device binary —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, platform 2!)

# TorApp –ø—ã—Ç–∞–µ—Ç—Å—è –ª–∏–Ω–∫–æ–≤–∞—Ç—å—Å—è —Å simulator slice
# Xcode –≤–∏–¥–∏—Ç —á—Ç–æ binary –∏–º–µ–µ—Ç platform 2 (iOS), –∞ –Ω–µ 7 (Simulator)
# ‚ùå –û–®–ò–ë–ö–ê!
```

---

## üéØ **–†–ï–®–ï–ù–ò–ï –î–õ–Ø v1.0.40:**

### –í–ï–†–ù–£–¢–¨–°–Ø –ö –°–¢–ê–†–û–ú–£ –ü–û–î–•–û–î–£!

```bash
# 1. –°–æ–∑–¥–∞—Ç—å XCFramework –¢–û–õ–¨–ö–û –¥–ª—è device
xcodebuild -create-xcframework \
    -framework output/device/Tor.framework \
    -output output/Tor.xcframework

# 2. Info.plist –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¢–û–õ–¨–ö–û ios-arm64
# 3. TorApp –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¢–û–õ–¨–ö–û –Ω–∞ device
# 4. ‚úÖ –ù–ê–î–Å–ñ–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢!
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Ä–∞–±–æ—Ç–∞–ª–æ –¥–æ v1.0.38)
- ‚úÖ –ù–ï–¢ –ø—Ä–æ–±–ª–µ–º —Å platform mismatch
- ‚úÖ –ù–ï–¢ undefined symbols

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù–ï–¢ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Simulator (–Ω–æ –∏ —Ä–∞–Ω—å—à–µ –Ω–µ –±—ã–ª–æ!)

---

## üìã **–ü–û–ß–ï–ú–£ –ù–ï–õ–¨–ó–Ø –ë–´–õ–û –ü–†–û–°–¢–û –°–ö–û–ü–ò–†–û–í–ê–¢–¨?**

### –ü—Ä–æ–±–ª–µ–º–∞: Platform hardcoded –≤ Mach-O binary!

```bash
# Device binary:
otool -l Tor.framework/Tor | grep platform
platform 2  ‚Üê iOS

# Simulator —Ç—Ä–µ–±—É–µ—Ç:
platform 7  ‚Üê iOS Simulator

# –ù–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å!
# –õ–∏–Ω–∫–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç platform –∏ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π!
```

---

## üî• **–§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï:**

### v1.0.40: –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ device-only XCFramework!

```bash
# –£–¥–∞–ª–∏—Ç—å simulator slice
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û device framework
# –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫!
```

**–≠–¢–û –¢–û –ñ–ï –°–ê–ú–û–ï —á—Ç–æ –±—ã–ª–æ –¥–æ v1.0.37!**

**Simulator support –¢–†–ï–ë–£–ï–¢:**
1. ‚úÖ –°–æ–±—Ä–∞—Ç—å Tor —Å `-target arm64-apple-ios16.0-simulator`
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (ht.h, etc)
3. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å libtor.a —Å platform 7
4. ‚úÖ –¢–æ–ª—å–∫–æ –¢–û–ì–î–ê –º–æ–∂–Ω–æ –ª–∏–Ω–∫–æ–≤–∞—Ç—å –¥–ª—è Simulator!

**–≠—Ç–æ –ë–û–õ–¨–®–ê–Ø –ó–ê–î–ê–ß–ê!** –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å device-only –ø–æ–¥—Ö–æ–¥!

---

# üéØ v1.0.40 = DEVICE ONLY = –ù–ê–î–Å–ñ–ù–û! ‚úÖ

