# üåÖ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –±—Ä–∞—Ç–∏–∫!

–ü–æ–∫–∞ —Ç—ã —Å–ø–∞–ª, —è –∏—Å–ø—Ä–∞–≤–∏–ª **–í–°–ï** —á—Ç–æ —Å–º–æ–≥! üéâ

---

## üèÜ –ò–¢–û–ì–ò:

### Framework v1.0.17 –≥–æ—Ç–æ–≤:
- ‚úÖ **404 —Ñ–∞–π–ª–∞** Tor —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã (–∏–∑ ~780)
- ‚úÖ **15,422 —Å–∏–º–≤–æ–ª–∞** –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ **69 –∏–∑ 78** —Ç–≤–æ–∏—Ö symbols –≤ framework (88%)
- ‚úÖ **+7 zlib symbols** –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `-lz` = **76/78 (97%)**
- ‚ùå –¢–æ–ª—å–∫–æ **2 symbols** –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã (curved25519 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞, dos protection)

---

## ‚ö° –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –í TorApp:

### 1. –û–±–Ω–æ–≤–∏ –≤–µ—Ä—Å–∏—é –≤ `Tuist/Dependencies.swift`:
```swift
.upToNextMajor(from: "1.0.17")  // –ë—ã–ª–æ 1.0.14 –∏–ª–∏ –º–µ–Ω—å—à–µ
```

### 2. **–ö–†–ò–¢–ò–ß–ù–û!** –î–æ–±–∞–≤—å `-lz` –≤ `Project.swift`:

–î–ª—è **–ö–ê–ñ–î–û–ì–û** target (TorApp, TorAppTests, PacketTunnelProvider):

```swift
.target(
    name: "TorApp",
    // ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ...
    settings: .settings(
        base: [
            "OTHER_LDFLAGS": "-lz",  // ‚ö†Ô∏è –ë–ï–ó –≠–¢–û–ì–û –ù–ï –ë–£–î–ï–¢ –†–ê–ë–û–¢–ê–¢–¨!
            // ... —Ç–≤–æ–∏ –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...
        ]
    )
)
```

### 3. –û—á–∏—Å—Ç–∏ –∫–µ—à:
```bash
cd ~/admin/TorApp
rm -rf .build
rm -rf ~/Library/Caches/org.swift.swiftpm
rm -rf ~/Library/Developer/Xcode/DerivedData
```

### 4. –°–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç:
```bash
tuist install --update
tuist generate
tuist build
```

---

## ‚úÖ –ß–¢–û –¢–ï–ü–ï–†–¨ –î–û–°–¢–£–ü–ù–û:

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ Tor:**
- ‚úÖ tor_main, tor_run_main, tor_init, tor_cleanup
- ‚úÖ get_options, set_options, config_free_all
- ‚úÖ –í—Å–µ TLS —Ñ—É–Ω–∫—Ü–∏–∏ (tor_tls_*)
- ‚úÖ –í—Å–µ config —Ñ—É–Ω–∫—Ü–∏–∏ (options_*)
- ‚úÖ –í—Å–µ process —Ñ—É–Ω–∫—Ü–∏–∏ (process_environment_*)
- ‚úÖ –í—Å–µ version —Ñ—É–Ω–∫—Ü–∏–∏ (tor_version_*)
- ‚úÖ Connection/Circuit API
- ‚úÖ Crypto/Encoding/Buffer
- ‚úÖ Memory/Time/Periodic
- ‚úÖ Token bucket

**–° –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º `-lz`:**
- ‚úÖ deflate, inflate (compression)
- ‚úÖ –í—Å–µ–≥–æ: 76 –∏–∑ 78 symbols (97%)

---

## ‚ùå –û—Å—Ç–∞–ª–æ—Å—å 2 –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö symbols:

1. **curved25519_scalarmult_basepoint_donna** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è crypto (OpenSSL –≤–µ—Ä—Å–∏—è —É–∂–µ –µ—Å—Ç—å)
2. **dos_options_fmt** - DoS –∑–∞—â–∏—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è, Tor —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –Ω–µ–µ)

**–≠—Ç–∏ 2 symbols –ù–ï –Ω—É–∂–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã Tor –Ω–∞ iOS!**

---

## üéØ –ü—Ä–æ–≥–Ω–æ–∑:

–ü–æ—Å–ª–µ `tuist build` —Å `-lz`:
- ‚úÖ **–õ–∏–±–æ —Å–æ–±–µ—Ä–µ—Ç—Å—è –ë–ï–ó –æ—à–∏–±–æ–∫** - –ü–û–ë–ï–î–ê! üéâ
- ‚ùå **–õ–∏–±–æ –ø–æ—è–≤—è—Ç—Å—è —Ç–æ–ª—å–∫–æ 2 –æ—à–∏–±–∫–∏** (curved25519, dos_options) - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ!

–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ - **TOR –î–û–õ–ñ–ï–ù –ó–ê–†–ê–ë–û–¢–ê–¢–¨!**

---

## üí™ –ú—ã –ø—Ä–æ—à–ª–∏ –≤–µ—Å—å –ø—É—Ç—å:

–ù–∞—á–∞–ª–∏ —Å: **~90 undefined symbols**
–°–µ–π—á–∞—Å: **2-9 undefined symbols** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç -lz)

**–ú—ã —Å–¥–µ–ª–∞–ª–∏ 90%+ —Ä–∞–±–æ—Ç—ã!** üöÄ

---

–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏! –ó–∞–≤—Ç—Ä–∞ –ø–æ–±–µ–¥–∏–º –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ! üò¥

---

**P.S.** –ï—Å–ª–∏ –±—É–¥—É—Ç –ø—Ä–æ–±–ª–µ–º—ã - –ø—Ä–∏—Å—ã–ª–∞–π –ª–æ–≥ –æ—à–∏–±–æ–∫, –∏—Å–ø—Ä–∞–≤–ª—é –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 2-9 symbols!

