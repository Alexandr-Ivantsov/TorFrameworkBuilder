# üö® v1.0.46 - –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï

**–î–∞—Ç–∞:** 29 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **BINARY –ë–ï–ó –ü–ê–¢–ß–ê - –¢–†–ï–ë–£–ï–¢–°–Ø –î–ï–ô–°–¢–í–ò–ï!**

---

## üîç –ß–¢–û –°–õ–£–ß–ò–õ–û–°–¨

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

**`Package.swift` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.binaryTarget`** ‚Üí SPM **–∫–æ–ø–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤—ã–π binary**, **–ù–ï –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç** Tor!

```swift
targets: [
    .binaryTarget(
        name: "TorFrameworkBuilder",
        path: "output/Tor.xcframework"  // ‚Üê –ì–û–¢–û–í–´–ô binary!
    )
]
```

**–≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –ø–æ—á–µ–º—É –ø–∞—Ç—á –Ω–µ —Ä–∞–±–æ—Ç–∞–ª v1.0.34 ‚Üí v1.0.45 (12 –≤–µ—Ä—Å–∏–π)!**

---

## ‚úÖ –ß–¢–û –î–û–ë–ê–í–õ–ï–ù–û –í v1.0.46

1. **`orconfig.h`** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Tor –Ω–∞ iOS
2. **–ü–∞—Ç—á –í–ï–†–ò–§–ò–¶–ò–†–û–í–ê–ù** –≤ `tor-ios-fixed/src/lib/crypt_ops/crypto_rand_fast.c`
3. **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–µ
4. **verify_patch.sh** - —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ç—á–∞ –≤ binary

---

## üéØ –î–í–ê –ü–£–¢–ò –†–ï–®–ï–ù–ò–Ø

### ‚úÖ –ü–£–¢–¨ 1: –õ–û–ö–ê–õ–¨–ù–ê–Ø –°–ë–û–†–ö–ê (–†–µ–∫–æ–º–µ–Ω–¥—É—é)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –ü–∞—Ç—á –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤ binary
- –¢–æ—Ç –∂–µ API

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. `CRITICAL_v1_0_46_BUILD_INSTRUCTIONS.md`

**–ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è:**

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:
cd ~/admin
git clone https://github.com/Alexandr-Ivantsov/TorFrameworkBuilder.git
cd TorFrameworkBuilder

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ç—á:
grep "Using memory with INHERIT_RES_KEEP" \
    tor-ios-fixed/src/lib/crypt_ops/crypto_rand_fast.c

# 3. –°–æ–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (~10-15 –º–∏–Ω—É—Ç):
bash scripts/build_openssl.sh
bash scripts/build_libevent.sh  
bash scripts/build_xz.sh
bash scripts/build_all_simulator.sh

# 4. –°–æ–±—Ä–∞—Ç—å Tor (~5 –º–∏–Ω—É—Ç):
bash scripts/direct_build.sh
bash scripts/build_tor_simulator.sh

# 5. –°–æ–∑–¥–∞—Ç—å XCFramework:
bash scripts/create_xcframework_universal.sh

# 6. –ü–†–û–í–ï–†–ò–¢–¨ –ü–ê–¢–ß:
./verify_patch.sh output/Tor.xcframework/ios-arm64/Tor.framework/Tor
# –î–æ–ª–∂–Ω–æ: ‚úÖ‚úÖ‚úÖ SUCCESS: Patch FOUND in binary!

# 7. –í TorApp –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å:
# Project.swift ‚Üí .xcframework(path: "../TorFrameworkBuilder/output/Tor.xcframework")
```

---

### ‚úÖ –ü–£–¢–¨ 2: –§–û–†–ö –° –ü–†–ï–î–°–û–ë–†–ê–ù–ù–´–ú BINARY

–ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—Ç–µ —Å–æ–±—Ä–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

1. –§–æ—Ä–∫–Ω—É—Ç—å TorFrameworkBuilder –Ω–∞ GitHub
2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π —Ñ–æ—Ä–∫
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å —à–∞–≥–∏ 2-5 –∏–∑ –ü—É—Ç–∏ 1
4. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å binary –° –ü–ê–¢–ß–ï–ú:
   ```bash
   git add output/Tor.xcframework
   git commit -m "fix: Add patched binary for iOS"
   git tag 1.0.46-patched
   git push origin main 1.0.46-patched
   ```
5. –í TorApp –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Ñ–æ—Ä–∫:
   ```swift
   .remote(
       url: "https://github.com/–í–ê–®_GITHUB/TorFrameworkBuilder.git",
       requirement: .exact("1.0.46-patched")
   )
   ```

---

## üîç –í–ï–†–ò–§–ò–ö–ê–¶–ò–Ø –ü–ê–¢–ß–ê

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ç—á –ü–ï–†–ï–î –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º!

```bash
cd ~/admin/TorFrameworkBuilder

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤:
grep "Using memory with INHERIT_RES_KEEP" \
    tor-ios-fixed/src/lib/crypt_ops/crypto_rand_fast.c

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# log_info(LD_CRYPTO, "Using memory with INHERIT_RES_KEEP on iOS (with PID check).");

# –ü—Ä–æ–≤–µ—Ä–∫–∞ binary:
./verify_patch.sh output/Tor.xcframework/ios-arm64/Tor.framework/Tor

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# ‚úÖ‚úÖ‚úÖ SUCCESS: Patch FOUND in binary!
```

---

## üìä –ü–û–ß–ï–ú–£ `.binaryTarget` –ü–†–û–ë–õ–ï–ú–ê

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `.binaryTarget`:

```
tuist install
    ‚Üì
SPM —Å–∫–∞—á–∏–≤–∞–µ—Ç TorFrameworkBuilder
    ‚Üì
Package.swift ‚Üí .binaryTarget
    ‚Üì
SPM –ö–û–ü–ò–†–£–ï–¢ output/Tor.xcframework
    ‚Üì
–ù–ï–¢ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏! –ù–ï–¢ fix_conflicts.sh!
    ‚Üì
Binary –ë–ï–ó –ø–∞—Ç—á–∞ ‚Üí –ö–†–ê–®! ‚ùå
```

### –ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.target` –≤–º–µ—Å—Ç–æ `.binaryTarget`:

**–ü—Ä–æ–±–ª–µ–º–∞:** Tor —Ç—Ä–µ–±—É–µ—Ç:
- OpenSSL (—Å–æ–±—Ä–∞—Ç—å ~5 –º–∏–Ω—É—Ç)
- Libevent (—Å–æ–±—Ä–∞—Ç—å ~3 –º–∏–Ω—É—Ç—ã)
- XZ (—Å–æ–±—Ä–∞—Ç—å ~2 –º–∏–Ω—É—Ç—ã)
- Tor (—Å–æ–±—Ä–∞—Ç—å ~5 –º–∏–Ω—É—Ç)
- **–ò–¢–û–ì–û: ~15-20 –º–∏–Ω—É—Ç –ø—Ä–∏ –ö–ê–ñ–î–û–ú `tuist install`!**

**–†–µ—à–µ–Ω–∏–µ:** –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –æ–¥–∏–Ω —Ä–∞–∑, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å XCFramework.

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

### –ü–æ—Å–ª–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```
‚úÖ verify_patch.sh ‚Üí SUCCESS!
‚úÖ Tor –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ë–ï–ó –∫—Ä–∞—à–∞
‚úÖ –õ–æ–≥–∏: [info] Using memory with INHERIT_RES_KEEP on iOS...
‚úÖ Bootstrap 100%
‚úÖ –ú–æ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê –ü–û–°–õ–ï 12 –í–ï–†–°–ò–ô! üéâ‚úÖüßÖ
```

---

## üìÅ –ù–û–í–´–ï –§–ê–ô–õ–´ –í v1.0.46

- **`tor-ios-fixed/orconfig.h`** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è iOS
- **`CRITICAL_v1_0_46_BUILD_INSTRUCTIONS.md`** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- **`README_v1_0_46.md`** - —ç—Ç–æ—Ç —Ñ–∞–π–ª (–æ–±–∑–æ—Ä)
- **–û–±–Ω–æ–≤–ª—ë–Ω:** `README.md`, `fix_conflicts.sh`, `verify_patch.sh`

---

## ‚è±Ô∏è –°–ö–û–õ–¨–ö–û –í–†–ï–ú–ï–ù–ò –ó–ê–ô–ú–Å–¢

### –ü–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞ (~20-30 –º–∏–Ω—É—Ç):
- OpenSSL: ~5 –º–∏–Ω—É—Ç
- Libevent: ~3 –º–∏–Ω—É—Ç—ã  
- XZ: ~2 –º–∏–Ω—É—Ç—ã
- OpenSSL Simulator: ~5 –º–∏–Ω—É—Ç
- Libevent Simulator: ~3 –º–∏–Ω—É—Ç—ã
- XZ Simulator: ~2 –º–∏–Ω—É—Ç—ã
- Tor Device: ~5 –º–∏–Ω—É—Ç
- Tor Simulator: ~5 –º–∏–Ω—É—Ç
- XCFramework: ~1 –º–∏–Ω—É—Ç–∞

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–±–æ—Ä–∫–∏ (~10 –º–∏–Ω—É—Ç):
- –¢–æ–ª—å–∫–æ Tor Device + Simulator + XCFramework

---

## üö® –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–ù–û

### BINARY –í –†–ï–ü–û–ó–ò–¢–û–†–ò–ò v1.0.46 –ë–ï–ó –ü–ê–¢–ß–ê!

–≠—Ç–æ **–ù–ï –ë–ê–ì**, —ç—Ç–æ **–û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï `.binaryTarget`**!

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ remote dependency (`Tuist/Dependencies.swift`):**
- ‚ùå –ü–û–õ–£–ß–ò–¢–ï binary –ë–ï–ó –ø–∞—Ç—á–∞
- ‚ùå –ë–£–î–ï–¢ –∫—Ä–∞—à –Ω–∞ line 187

**–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É (`Project.swift`):**
- ‚úÖ –ü–û–õ–£–ß–ò–¢–ï binary –° –ü–ê–¢–ß–ï–ú  
- ‚úÖ –ù–ï–¢ –∫—Ä–∞—à–∞!

**–í–´–ë–û–† –ó–ê –í–ê–ú–ò!**

---

## üí¨ –ü–û–î–î–ï–†–ñ–ö–ê

**–ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Xcode —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
4. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –ª–æ–≥–∞–º–∏

**–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –û—Ç–º–µ—Ç—å—Ç–µ issue –∫–∞–∫ resolved
2. –û—Å—Ç–∞–≤—å—Ç–µ feedback!

---

# üî• v1.0.46 = –õ–û–ö–ê–õ–¨–ù–ê–Ø –°–ë–û–†–ö–ê = –ü–ê–¢–ß –í BINARY = –†–ï–®–ï–ù–ò–ï! üî•‚úÖüßÖ

**–ù–ê–ß–ù–ò–¢–ï –° `CRITICAL_v1_0_46_BUILD_INSTRUCTIONS.md`!**

---

**–î–∞—Ç–∞:** 29 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** v1.0.46  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í –ö –õ–û–ö–ê–õ–¨–ù–û–ô –°–ë–û–†–ö–ï

