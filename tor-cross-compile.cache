# Cache file for cross-compiling Tor to iOS arm64
# CRITICAL: This prevents configure from compiling/running ANY test programs

# ========================================
# CRITICAL: Cross-compilation mode
# ========================================
cross_compiling=yes
ac_cv_prog_cc_cross=yes

# ========================================
# Compiler works (skip test)
# ========================================
ac_cv_prog_cc_works=yes
ac_cv_prog_cc_cross=yes
ac_cv_prog_cxx_works=yes
ac_cv_c_compiler_gnu=yes
ac_cv_prog_cc_g=yes

# ========================================
# Memory allocation
# ========================================
ac_cv_func_malloc_0_nonnull=yes
ac_cv_func_realloc_0_nonnull=yes
ac_cv_func_memset_0=yes
tor_cv_can_malloc_0=yes
ac_cv_func_malloc=yes
ac_cv_func_realloc=yes
ac_cv_func_free=yes

# ========================================
# Type sizes for iOS arm64
# ========================================
tor_cv_null_is_zero=yes
tor_cv_dbl_val_order=yes
tor_cv_time_t_signed=yes
tor_cv_ssize_t_signed=yes
tor_cv_size_t_signed=no
tor_cv_enum_always_signed=no
tor_cv_twos_complement=yes
tor_cv_uint8_t_is_unsigned_char=yes

ac_cv_sizeof_void_p=8
ac_cv_sizeof_size_t=8
ac_cv_sizeof_time_t=8
ac_cv_sizeof_pid_t=4
ac_cv_sizeof_int=4
ac_cv_sizeof_unsigned_int=4
ac_cv_sizeof_long=8
ac_cv_sizeof_long_long=8
ac_cv_sizeof_short=2
ac_cv_sizeof_char=1
ac_cv_sizeof_cell_t=0

# ========================================
# Endianness and architecture
# ========================================
ac_cv_c_bigendian=no
ac_cv_c_byte_order=1234

# ========================================
# Standard headers (all present in iOS SDK)
# ========================================
ac_cv_header_stdc=yes
ac_cv_header_pthread_h=yes
ac_cv_header_sys_types_h=yes
ac_cv_header_sys_stat_h=yes
ac_cv_header_stdlib_h=yes
ac_cv_header_string_h=yes
ac_cv_header_memory_h=yes
ac_cv_header_strings_h=yes
ac_cv_header_inttypes_h=yes
ac_cv_header_stdint_h=yes
ac_cv_header_unistd_h=yes
ac_cv_header_errno_h=yes
ac_cv_header_fcntl_h=yes
ac_cv_header_signal_h=yes
ac_cv_header_time_h=yes
ac_cv_header_sys_time_h=yes
ac_cv_header_sys_socket_h=yes
ac_cv_header_netinet_in_h=yes
ac_cv_header_arpa_inet_h=yes
ac_cv_header_netdb_h=yes
ac_cv_header_sys_file_h=yes
ac_cv_header_sys_ioctl_h=yes
ac_cv_header_sys_param_h=yes
ac_cv_header_sys_resource_h=yes
ac_cv_header_sys_select_h=yes
ac_cv_header_sys_statvfs_h=yes
ac_cv_header_sys_sysctl_h=yes
ac_cv_header_sys_un_h=yes
ac_cv_header_sys_wait_h=yes
ac_cv_header_syslog_h=yes
ac_cv_header_utime_h=yes
ac_cv_header_glob_h=yes

# ========================================
# Functions available on iOS
# ========================================
ac_cv_func_accept4=no
ac_cv_func_eventfd=no
ac_cv_func_pipe2=no
ac_cv_func_explicit_bzero=no
ac_cv_func_timingsafe_memcmp=no
ac_cv_func_getaddrinfo=yes
ac_cv_func_gettimeofday=yes
ac_cv_func_gmtime_r=yes
ac_cv_func_inet_aton=yes
ac_cv_func_localtime_r=yes
ac_cv_func_mmap=yes
ac_cv_func_socketpair=yes
ac_cv_func_strptime=yes
ac_cv_func_strtok_r=yes
ac_cv_func_sysconf=yes
ac_cv_func_uname=yes
ac_cv_func_vasprintf=yes
ac_cv_func_vsnprintf=yes
ac_cv_func_snprintf=yes
ac_cv_func_issetugid=yes
ac_cv_func_clock_gettime=yes
ac_cv_func_getrlimit=yes
ac_cv_func_sigaction=yes
ac_cv_func_backtrace=yes
ac_cv_func_backtrace_symbols_fd=yes
ac_cv_func_madvise=yes
ac_cv_func_minherit=yes
ac_cv_func_flock=yes
ac_cv_func_prctl=no

# ========================================
# Library functions
# ========================================
ac_cv_search_socket=none required
ac_cv_search_gethostbyname=none required
ac_cv_search_dlopen=none required
ac_cv_search_inet_aton=none required
ac_cv_search_pthread_create=none required
ac_cv_search_pthread_detach=none required

# ========================================
# Pthread
# ========================================
ac_cv_header_pthread_h=yes
ac_cv_func_pthread_create=yes

# ========================================
# Special iOS stuff
# ========================================
ac_cv_func__NSGetEnviron=yes
tor_cv_build_tor_with_rust=no
